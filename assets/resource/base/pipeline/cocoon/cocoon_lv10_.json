{
    "自动挂Lv10茧": {
        "next": ["传送到西斯莱萨矿场_废弃矿洞_向前冲刺一次再移动2500ms然后点击进入溺梦之地"]
    },
    "传送到西斯莱萨矿场_废弃矿洞_向前冲刺一次再移动2500ms然后点击进入溺梦之地": {
        "recognition": "DirectHit",
        "action": {
            "type": "Custom",
            "param": {
                "custom_action": "run_custom_actions_series",
                "custom_action_param": {
                    "actions": [
                        "从省电模式唤醒",
                        "点击快捷方式按钮",
                        "点击正下方的快捷选项"
                    ],
                    "interval": 1000
                }
            }
        },
        "post_delay": 5000, // 等待传送动画结束, 受限于模拟器性能, 消耗时长不一定是很稳定的
        "next": ["在传送点向前冲刺一次并向前移动2500ms然后点击进入溺梦之地"]
    },
    "在传送点向前冲刺一次并向前移动2500ms然后点击进入溺梦之地": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "template": ["浮游之茧/传送点上的查看地图图标.png"],
                "roi": [840, 334, 27, 21]
            }
        },
        "pre_delay": 3000,
        "action": {
            "type": "Custom",
            "param": {
                "custom_action": "run_custom_actions_series",
                "custom_action_param": {
                    "actions": [
                        "E-冲刺"
                    ],
                    "interval": 2000
                }
            }
        },
        "post_delay": 1000,
        "next": ["打开一键连招然后向前移动2500ms然后进入溺梦之地"]
    },
    "打开一键连招然后向前移动2500ms然后进入溺梦之地": {
        "recognition": "DirectHit",
        "action": {
            "type": "Custom",
            "param": {
                "custom_action": "run_pipeline_node",
                "custom_action_param": {
                    "pipeline_node_name": "打开一键连招"
                }
            }
        },
        "next": ["向前移动2500ms然后进入溺梦之地"]
    },
    "向前移动2500ms然后进入溺梦之地": {
        "recognition": "DirectHit",
        "action": {
            "type": "Custom",
            "param": {
                "custom_action": "move_wsad",
                "custom_action_param": {
                    "direction": "前",
                    "millisecond": 2500
                }
            }
        },
        "timeout": 20000, // 20s内如果没识别到进入溺梦之地的按钮就算失败(之所以放宽到 20s 是为了在识别失败后冲刺能转好)
        "rate_limit": 5000, // 最快每5s尝试一次
        "next": ["进入溺梦之地"],
        "interrupt": ["从省电模式唤醒"],
        "on_error": ["自动挂Lv10茧"] // 当无法正常进入溺梦之地时, 重试整个流程
    },
    "进入溺梦之地": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "template": ["浮游之茧/进入溺梦之地图标.png"],
                "roi": [840, 334, 27, 21]
            }
        },
        "action": "Click",
        "post_delay": 5000, // 受限于模拟器性能, 点了按钮之后不一定立刻就能进入溺梦之地, 多等几秒
        "next": [
            "等待幻觉值积累满后等待5min重复整个流程"
        ],
        "interrupt": ["从省电模式唤醒"],
        // 1day = 24h * 60min * 60s * 1000ms = 86400000ms
        "timeout": 86400000
    },
    "等待幻觉值积累满后等待5min重复整个流程": {
        "rate_limit": 60000, // 溺梦之地初始时间 30min, 每 1min 识别一次即可
        "next": [
            "识别到幻觉值积累满后等待5min重复整个流程"
        ],
        // 1day = 24h * 60min * 60s * 1000ms = 86400000ms
        "timeout": 86400000
    },
    "识别到幻觉值积累满后等待5min重复整个流程": {
        "recognition": {
            "type": "OCR",
            "param": {
                "expected": ["退出"],
                "roi": [230, 28, 36, 19]
            }
        },
        "inverse": true, // 识别不到溺梦之地退出按钮说明幻觉值满了被踢出去了
        "post_delay": 10000,
        "rate_limit": 6000, // 默认 timeout 是 20s, 最快每6s尝试一次, 不需要太频繁识别
        "next": [
            "识别到灰屏继续识别",
            "从省电模式唤醒然后继续等待幻觉值积累满",
            "浮游之茧-识别到死亡状态等待5s点击原地复活",
            "识别到已被复活然后继续等待幻觉值积累满",
            "再次识别到幻觉值积累满后等待5min重复整个流程"
        ],
        "interrupt": ["从省电模式唤醒"],
        "on_error": ["等待幻觉值积累满后等待5min重复整个流程"]
    },
    "识别到灰屏继续识别": {
        "recognition": {
            "type": "ColorMatch",
            "param": {
                "roi": [512, 288, 256, 144],
                "lower": [0, 0, 0],
                "upper": [10, 10, 10],
                "count": 1000
            }
        },
        "next": [
            "识别到幻觉值积累满后等待5min重复整个流程"
        ]
    },
    "从省电模式唤醒然后继续等待幻觉值积累满": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [528, 629, 223, 35],
                "expected": ["省电模式"]
            }
        },
        "action": {
            "type": "Click",
            "param": {
                "target": [591, 4, 33, 17]
            }
        },
        "next": ["等待幻觉值积累满后等待5min重复整个流程"]
    },
    "识别到已被复活然后继续等待幻觉值积累满": {
        // 能识别到副本退出按钮的时候说明已经活了
        "recognition": {
            "type": "OCR",
            "param": {
                "expected": ["退出"],
                "roi": [230, 28, 36, 19]
            }
        },
        "next": ["等待幻觉值积累满后等待5min重复整个流程"]
    },
    "浮游之茧-识别到死亡状态等待5s点击原地复活": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "template": ["浮游之茧/复活按钮.png"],
                "roi": [1055, 615, 46, 36]
            }
        },
        "post_delay": 5000,
        "next": [
            "识别到可以复活时点击复活按钮然后继续等待幻觉值积累满后等待5min重复整个流程"
        ]
    },
    "识别到可以复活时点击复活按钮然后继续等待幻觉值积累满后等待5min重复整个流程": {
        "recognition": {
            "type": "ColorMatch",
            "param": {
                "roi": [1075, 629, 6, 5],
                "lower": [145, 83, 28],
                "upper": [155, 93, 35],
                "count": 4
            }
        },
        "action": {
            "type": "Click",
            "param": {
                "target": [1056, 612, 45, 37]
            }
        },
        "next": ["等待幻觉值积累满后等待5min重复整个流程"],
        // 挂机一天
        "timeout": 86400
    },
    "再次识别到幻觉值积累满后等待5min重复整个流程": {
        "recognition": {
            "type": "OCR",
            "param": {
                "expected": ["退出"],
                "roi": [230, 28, 36, 19]
            }
        },
        "inverse": true, // 识别不到溺梦之地退出按钮说明幻觉值满了被踢出去了
        "action": {
            "type": "Custom",
            "param": {
                "custom_action": "wait_x_seconds",
                "custom_action_param": {
                    "wait_seconds": 300 // 等待 5 分钟
                }
            }
        },
        "next": ["自动挂Lv10茧"]
    }
}
